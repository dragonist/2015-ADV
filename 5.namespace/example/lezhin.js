!function(t,e,i){"use strict";function a(t,e){var i;return function(){i&&clearTimeout(i),i=setTimeout(t,e||100)}}function s(t,e){var i={aspectRatio:2,threshold:100};$.extend(this,$.extend(i,e)),this.touching=!1,this.started={at:0,x:0,y:0},this.startedAt=0,this.startedX=0,this.element=t,this.leftPage=this.element.find(".pager-page").last(),this.currPage=this.element.find(".pager-page").first(),this.rightPage=this.currPage.next(".pager-page"),this.leftPage.dataset("pager-pos","left"),this.currPage.dataset("pager-pos","curr"),this.rightPage.dataset("pager-pos","right"),this.element.on("touchstart",this.onTouchStart.bind(this)),this.element.on("touchmove",this.onTouchMove.bind(this)),this.element.on("touchend",this.onTouchEnd.bind(this))}t.lc||(t.lc={});var n=$(t),o=$("body"),r=n.width(),c=r>768,l=8==e.documentMode;lc.Home={init:function(e){$.extend(!0,this,e),this.initTabs(),this.resizeThings(),$(t).on("resize",a(this.resizeThings)),this.todayComics=[],this.initData(),this.initTodayComics(),this.initPrintedComics(),this.initTop5(),lc.Promotion.init(this.promotions,{baseUrl:this.baseUrl}),lc.Search.init(),lc.Notice.init(),this.initAuth(),lc.Pager.init(),$.subscribe("maintab:changed",function(t,e,i){if(lc.Home.hideAuth(),!c){var a=["scheduled","printed"];a.indexOf(e)>=0&&lc.Pager.instances[e].stopAuto(),a.indexOf(i)>=0&&lc.Pager.instances[i].startAuto()}}),this.changeTab(location.hash.slice(1)),$("#mainheader,#main,#notice-section,#main-footer").on("click",function(){lc.Home.hideAuth()}),$.subscribe("layout:changed",function(t,e){$.each(["scheduled","printed"],function(t,i){var a=$("#comic-"+i+"-list");e||a.dataset("show-all",!1);var s,n=e&&"true"==a.dataset("show-all");s="scheduled"==i?a.find(n?".homelist-thumb":".tabcontent[data-tab="+a.dataset("tab")+"] .homelist-thumb"):$(n?"#comic-printed-all .homelist-thumb":"#comic-printed-genre .homelist-thumb"),lc.Home.changeLayout(e,i,s,n)}),lc.Home.changeLayout(e,"top50",$("#comic-top50-list").find(".homelist-thumb")),lc.Home.changeLayout(e,"genre",$("#comic-genre-list").find(".homelist-thumb"));var i=$("#comic-printed-list .tab.is-on");$("#comic-printed-tabs").dataset("fold",i.is(":hidden")?0:1)})},changeLayout:function(t,e,i,a){i.each(function(i){var s=$(this),n=s.closest("[data-comic-id]"),o=n.dataset("comic-id"),r=!1,c=!1;"top50"==e?(c=0===i,r=t?9>i:!1):r=8>i&&t&&!a,n.toggleClass("is-huge",c),n.toggleClass("is-card is-double",r);var l=lc.Home.getComicImageUrl(o,c?"wide?width=1200":r?"wide?width=560":"thumbnail?width=260");s.dataset("src",l)}).tada()},initTabs:function(){lc.Tab.init(),o.dataset("tab","comic"),n.on("hashchange",function(){lc.Home.changeTab(location.hash.slice(1))}),$("#comic-scheduled-btn-heading").on("click",function(){return lc.Home.toggleList("scheduled"),lc.Home.hideAuth(),!1}),$("#comic-printed-btn-heading").on("click",function(){return lc.Home.toggleList("printed"),lc.Home.hideAuth(),!1}),$(".btn-category-more").on("click",function(){var t="1"==$(this).parent().dataset("fold")?"0":"1";return $(this).parent().dataset("fold",t),!1}),$(".tabwrap").on("tab:changed",function(t,e,i){var a=$(this),s=a.attr("id");"comic-top50-list"!=s&&s&&localStorage.setItem(s,i)}),$("#comic-scheduled-list").on("tab:changed",function(t,e,i){$(".tabcontent[data-tab="+i+"] [data-src]").tada()}),$("#comic-printed-list").on("tab:changed",function(t,e,i){lc.Home.changePrintedTab(i)}),$("#comic-genre-list").on("tab:changed",function(t,e,i){lc.Home.changeGenreTab(i)})},changeTab:function(e){var i=o.dataset("subtab");if(i!=e){var a=["scheduled","printed","top50","genre"];a.indexOf(e)<0&&(e="scheduled"),o.attr("data-subtab",e);var s=$("#mainheader-subtabs [data-tabname=comic]");if(s.find(".is-on").removeClass("is-on"),s.find("a[data-subtabname="+e+"]").addClass("is-on"),"top50"==e)this.initRankedComics();else{var n=localStorage.getItem("comic-"+e+"-list");if(n){if(lc.Tab.change("#comic-"+e+"-list .tab[data-tab="+n+"]"),"printed"==e){var r=$("#comic-printed-list .tab.is-on");r.is(":hidden")&&$("#comic-printed-tabs").dataset("fold",0)}}else lc.Tab.change("#comic-"+e+"-list .tab:first")}$.publish("maintab:changed",[i,e]),t.scrollTo(0,0)}},toggleList:function(t,e){var a=$("#comic-"+t+"-list");if(e===i&&(e="true"!=a.dataset("show-all")),a.dataset("show-all",e),localStorage.setItem(t+"-list-show-all",e),e)a.find(".homelist .is-card").each(function(){var t=$(this),e=t.dataset("comic-id");t.removeClass("is-card is-double");var i=lc.Home.getComicImageUrl(e,"thumbnail?width=260");l?t.find(".homelist-thumb").css("filter","progid:DXImageTransform.Microsoft.AlphaImageLoader(src="+i+",sizingMethod=scale)"):t.find(".homelist-thumb").dataset("src",i)}),setTimeout(function(){a.find("[data-src]").tada()},60);else{var s="printed"==t?$("#comic-printed-genre"):a.find(".homelist");if(s.each(function(){$(this).find("li:lt(8)").each(function(){var t=$(this),e=t.dataset("comic-id");t.addClass("is-card is-double");var i=lc.Home.getComicImageUrl(e,"wide?width=560");l?t.find(".homelist-thumb").css("filter","progid:DXImageTransform.Microsoft.AlphaImageLoader(src="+i+",sizingMethod=scale)"):t.find(".homelist-thumb").dataset("src",i)})}),"printed"==t)$("#comic-printed-genre [data-src]").tada();else{var n=a.dataset("tab");a.find(".homelist[data-tab="+n+"] [data-src]").tada()}}},setComicToggle:function(t,e){var i=$("#comic-"+t+"-list");if(e||(e="1"==i.attr("data-toggle")?"2":"1"),i.attr("data-toggle",e),localStorage.setItem(t+"-list-toggle",e),"1"==e){var a=i.dataset("tab");if("printed"==t&&"\uc778\uae30"!=a)return;var s=i.find(".homelist"+("scheduled"==t?"":":nth-child(1)"));s.each(function(){$(this).find("li:"+("scheduled"==t?"lt(8)":"lt(4)")).each(function(){var t=$(this),e=t.dataset("comic-id");t.addClass("is-card is-double"),t.find(".homelist-thumb").dataset("src",lc.Home.getComicImageUrl(e,"wide?width=560"))})}),i.find(".homelist[data-tab="+a+"] [data-src]").tada()}else i.find(".homelist .is-card").each(function(){var t=$(this),e=t.dataset("comic-id");t.removeClass("is-card is-double"),t.find(".homelist-thumb").dataset("src",lc.Home.getComicImageUrl(e,"thumbnail?width=260"))}),i.find("[data-src]").tada()},resizeThings:function(){var t=n.width();if((c&&768>=t||!c&&t>768)&&$.publish("layout:changed",[!c]),c=t>768,r=t,c)for(var e in lc.Pager.instances)lc.Pager.instances[e].stopAuto()},initData:function(){var t=(new Date).getDay();$("[data-day="+t+"]").addClass("curr");for(var i=[0,0,0,0,0,0,0,0,0],a=[0,0,0,0,0,0,0,0,0],s=[],n=[],o=[],r=0;9>r;++r)o.push($(e.createDocumentFragment()));for(var r=0,l=this.comics.length;l>r;++r){var d=this.comics[r],h=d.grant;if(!h||"none"!=h.purchase||"owner"!=h.view){s.push(d);var m=d.comicId;if((d.up||d.newly)&&n.indexOf(m)<0&&(this.todayComics.push(d),n.push(m)),d.days)for(var u=d.days.split("/"),g=0,f=u.length;f>g;++g){var p=u[g];if((!d.printed||d.completed)&&"p"!=p&&"z"!=p){var v=d.completed?8:"n"==p?7:p;d.up&&(a[v]=!0);var b=i[v];8>b&&(i[v]=b+1);var C={};c&&8>b&&(C.isCard=!0,C.isDouble=!0),o[v].append(this.createComic(d,C))}}}}this.comics=s;for(var r=0;9>r;++r)o[r].appendTo("#comic-scheduled-day-"+(8==r?"c":7==r?"n":r));this.comics.sort(function(t,e){return t.seq-e.seq});for(var w=$("#comic-scheduled-list"),r=0,l=a.length;l>r;++r){var p=a[r];if(p){var y=7==r?"n":8==r?"c":r;w.find(".tab[data-tab="+y+"]").addClass("is-up")}}c&&"true"==localStorage.getItem("scheduled-list-show-all")?this.toggleList("scheduled",!0):w.dataset("show-all",!1)},initTodayComics:function(){var t=$("#comic-scheduled-day-t");this.todayComics.sort(function(t,e){return e.up-t.up});for(var i=$(e.createDocumentFragment()),a=0,s=this.todayComics.length;s>a;++a){var n=this.todayComics[a],o={};c&&8>a&&(o.isCard=!0,o.isDouble=!0),i.append(this.createComic(n,o))}t.append(i),$("#comic-scheduled-day-t [data-src]").tada()},initTop5:function(){for(var t=$("#top5-template").html(),e=0,i=0,a=0,s=this.comics.length;s>a;++a){var n=this.comics[a];if(e>4&&i>4)break;if(n.printed){if(i>4)continue;i+=1}else{if(e>4)continue;e+=1}var o={artist:n.artistDisplayName,thumbnail:this.getComicImageUrl(n.comicId,"thumbnail?width=100"),title:n.title,url:"/comic/"+n.comicId},r=$(lc.Util.template(t,o));l&&r.find(".curation-thumb").css("filter","progid:DXImageTransform.Microsoft.AlphaImageLoader(src="+o.thumbnail+",sizingMethod=scale)"),r.appendTo(n.printed?"#comic-printed-top5":"#comic-scheduled-top5")}},initPrintedComics:function(){for(var t=$("#comic-printed-all"),i=$(e.createDocumentFragment()),a=0,s=this.comics.length;s>a;++a){var n=this.comics[a];n.printed&&i.append(lc.Home.createComic(n))}t.append(i),c&&"true"==localStorage.getItem("printed-list-show-all")?this.toggleList("printed",!0):$("#comic-printed-list").dataset("show-all",!1)},changePrintedTab:function(t){for(var i=$("#comic-printed-genre").empty(),a=$(e.createDocumentFragment()),s=0,n=0,o=0,r=this.comics.length;r>o;++o){var l=this.comics[o];if(l.printed){if("\uc778\uae30"==t){if(s>=50)break;s+=1}else if("\uc2e0\uaddc"==t){if(!l.newly)continue}else if("\uc644\uacb0"==t){if(!l.completed)continue}else if("\uc778\uae30"!=t&&l.genre.split(/\s*,\s*/).indexOf(t)<0)continue;n+=1;var d={};c&&8>=n&&(d.isCard=!0,d.isDouble=!0),a.append(lc.Home.createComic(l,d))}}i.append(a),i.find("[data-src]").tada()},initRankedComics:function(){var t=$("#comic-top50-list");if("true"!=t.dataset("init")){for(var i=$(e.createDocumentFragment()),a=0;50>a;++a){var s=this.comics[a],n={template:"#comic-rank-template",ranking:a+1,isHuge:0==a};c&&(n.isCard=9>a,n.isDouble=9>a),i.append(lc.Home.createComic(s,n))}t.append(i),t.find("[data-src]").tada(),t.dataset("init",!0)}},changeGenreTab:function(t){for(var i=$("#comic-genre-list ul").empty(),a=$(e.createDocumentFragment()),s=0,n=0,o=this.comics.length;o>n;++n){var r=this.comics[n],l=r.genre.split(/\s*,\s*/);if(!(l.indexOf(t)<0)){var d=8>s,h={};c&&d&&(h.isCard=!0,h.isDouble=!0),a.append(lc.Home.createComic(r,h)),d&&(s+=1)}}i.append(a),i.find("[data-src]").tada()},createComic:function(t,e){e=e||{};var i=t.meta&&t.meta.sprite,a={artist:t.artistDisplayName,comicId:t.comicId,comment:t.todayComment||t.comment,genre:t.genre,hasSprite:!!i,schedule:t.schedule,thumbnail:this.getComicImageUrl(t.comicId,e.isHuge?"wide?width=1200":e.isCard?"wide?width=560":"thumbnail?width=260"),title:t.title,url:(e.url||"/comic/")+t.comicId};e.ranking&&(a.ranking=e.ranking+"\uc704");var s=$(e.template||"#comic-template").html(),n=$(lc.Util.template(s,a));return t.newly&&n.addClass("is-new"),t.up&&n.addClass("is-up"),t.adult&&n.addClass("is-adult"),"delay"==t.state&&n.addClass("is-hold"),e.isCard&&n.addClass("is-card"),e.isDouble&&n.addClass("is-double"),e.isHuge&&n.addClass("is-huge"),l&&n.find(".homelist-thumb").css("filter","progid:DXImageTransform.Microsoft.AlphaImageLoader(src="+a.thumbnail+",sizingMethod=scale)"),n},getSpritePosition:function(t,e,i){var a=(t-1)%20,s=Math.floor((t-1)/20);return-a*e+"px -"+s*i+"px"},getComic:function(t){for(var e=0,i=this.comics.length;i>e;++e){var a=this.comics[e];if(a.comicId==t)return a}},getComicImageUrl:function(t,e){return lc.Util.expandPath(this.baseUrl,"comics",t,"images",e)},initAuth:function(){$("#auth-tabs").on("click","a",function(t){t.preventDefault();var e=$(this),i=e.closest("[data-logintab]"),a=i.dataset("logintab");i.dataset("logintab","0"==a?"1":"0")}),$("#login-form").on("submit",function(t){t.preventDefault();var e=$(this),i=e.find("[name=username]"),a=e.find("[name=password]"),s=$.trim(i.val()),n=$.trim(a.val());return s.length?n.length?(s=s.toLowerCase(),i.val(s),lc.Regex.email.test(s)?n.length<6?void lc.Form.alert(a,"\ube44\ubc00\ubc88\ud638\ub294 6\uc790\ub9ac \uc774\uc0c1 \ub123\uc5b4\uc8fc\uc138\uc694."):(e.find("button").prop("disabled",!0),void this.submit()):void lc.Form.alert(i,"\uc774\uba54\uc77c \ud615\uc2dd\uc774 \uc62c\ubc14\ub974\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4.")):void lc.Form.alert(a,"\ube44\ubc00\ubc88\ud638\ub97c \uc785\ub825\ud558\uc138\uc694."):void lc.Form.alert(i,"\uc774\uba54\uc77c\uc744 \uc785\ub825\ud558\uc138\uc694.")}),$("#signup-form").on("submit",function(t){t.preventDefault();var e=$(this),i=e.find("[name=username]"),a=e.find("[name=password]"),s=$("#join-agree"),n=$.trim(i.val()),o=$.trim(a.val());if(!n.length)return void lc.Form.alert(i,"\uc774\uba54\uc77c\uc744 \uc785\ub825\ud558\uc138\uc694.");if(!o.length)return void lc.Form.alert(a,"\ube44\ubc00\ubc88\ud638\ub97c \uc785\ub825\ud558\uc138\uc694.");if(n=n.toLowerCase(),i.val(n),!lc.Regex.email.test(n))return void lc.Form.alert(i,"\uc774\uba54\uc77c \ud615\uc2dd\uc774 \uc62c\ubc14\ub974\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4.");if(o.length<6)return void lc.Form.alert(a,"\ube44\ubc00\ubc88\ud638\ub294 6\uc790\ub9ac \uc774\uc0c1 \ub123\uc5b4\uc8fc\uc138\uc694.");if(!s.is(":checked"))return void lc.Form.alert(s,"\uc11c\ube44\uc2a4 \uc57d\uad00 \ubc0f \uac1c\uc778\uc815\ubcf4 \ucde8\uae09\ubc29\uce68\uc5d0 \ub3d9\uc758\ud574\uc8fc\uc138\uc694.");var e=$(this);e.find("button").prop("disabled",!0),this.submit()}),$("#login-fb").on("click",function(){var t="/login/facebook?from=%2Flogin";t+="&remember_me="+$("[name=remember_me]").is(":checked").toString(),t+="&redirect="+$("[name=redirect]").val(),location.href=t}),$("#signup-fb").on("click",function(){var t="/login/facebook?from=%2Fsignup&remember_me=false";t+="&redirect="+$("[name=redirect]").val(),location.href=t}),$(".btn-menu").on("click",function(){var t=$(".sidenav").toggleClass("is-on");$("body").toggleClass("is-side-open",t.hasClass("is-on"))}),$("#sidenav-exit").on("click",function(){lc.Home.hideAuth()})},hideAuth:function(){$(".sidenav").removeClass("is-on"),$("body").removeClass("is-side-open")}},lc.Promotion={init:function(t,e){$.extend(!0,this,e),this.template={banner:$("#curation-banner-template").html(),comic:$("#curation-comic-template").html()};for(var i=0,a=t.length;a>i;++i){var s,n=t[i],o=n.slot,r=o.split("_"),c=r[0],l=r[1];if("topmost"==c)s="topmost";else if("main"==l)s="main";else{if("sub"!=l)continue;s="sub"}lc.Promotion[s](c,l,n)}},topmost:function(t,e,i){var a=i.items[0];if(a){var s=a.target||("comic"==a.type?"/comics/"+a.comicId:null);if(s){var n=a.extra&&a.extra.background;if(n){var o=$("#topmost-banner");o.dataset("banner-id",a.id);var r=new Image;r.setAttribute("data-background",n),r.setAttribute("data-image",a.image),r.setAttribute("data-target",s),r.onload=function(){o.css("background",this.getAttribute("data-background"));var t=o.find("a");t.attr("href",this.getAttribute("data-target")),s.match(/^http/)&&t.attr("target","_blank"),o.find("img").attr("src",this.getAttribute("data-image"))},r.src=a.image}}}},main:function(t,e,i){if(!(["scheduled","printed"].indexOf(t)<0)){var a=i.items,s=lc.Util.random(0,3),n=[lc.Util.random(3,6),lc.Util.random(6,9),lc.Util.random(9,12)],o=[lc.Util.random(12,15),lc.Util.random(15,18)],r=[1,2,3,5,6,7],c=lc.Util.shuffle([1,2,5,6])[0];r.splice(r.indexOf(c),1),r.splice(r.indexOf(c+1),1);var l=lc.Util.shuffle(r)[0];r.splice(r.indexOf(l),1);var d=$("#comic-"+t+"-curation");this.placeDouble(d,a,s,c),this.placeHalf(d,a,o,l),this.placeSingle(d,a,n,r)}},placeDouble:function(t,e,i,a){var s=e[i];if(s){var n=this.renderMain(s,a,"wide?width=1200");n.addClass("is-double"),t.find(".swipe:nth-child(1)").append(n)}},placeHalf:function(t,e,i,a){for(var s=0,n=i.length;n>s;++s){var o=e[i[s]];if(o){var r=this.renderMain(o,a,"wide?width=560");r.addClass("is-couple"),t.find(".swipe:nth-child(4)").append(r)}}},placeSingle:function(t,e,i,a){for(var s=0,n=i.length;n>s;++s){var o=e[i[s]];if(o){var r=this.renderMain(o,a[s],"square?width=590");t.find(".swipe:nth-child("+(s?3:2)+")").append(r)}}},renderMain:function(t,e,i){return this.render(t,{position:e,thumbnail:"comic"==t.type?lc.Home.getComicImageUrl(t.comicId,i):t.image})},sub:function(t,e,i){if(!(["scheduled","printed"].indexOf(t)<0))for(var a=lc.Util.shuffle(i.items),s=0,n=Math.min(a.length,2);n>s;++s){var o=a[s],r=this.render(o,{position:4});r.addClass("is-couple"),r.appendTo("#comic-"+t+"-curation .swipe:nth-child(2)")}},render:function(t,e){var i;if("comic"==t.type){var a=t.comicId,s=lc.Home.getComic(a);e=$.extend({artist:s.artistDisplayName,title:s.title,url:lc.Util.expandPath("/comic",a)},e),i=$(lc.Util.template(this.template.comic,e))}else e=$.extend({thumbnail:t.image,title:t.title,url:t.target},e),i=$(lc.Util.template(this.template.banner,e)),t.target.match(/^http/i)&&i.find("a").attr("target","_blank");return l&&i.find(".curation-thumb").css("filter","progid:DXImageTransform.Microsoft.AlphaImageLoader(src="+e.thumbnail+",sizingMethod=scale)"),i}},lc.Search={init:function(){var t=$("#search-main"),e=this.initData();t.typeahead([{engine:Hogan,local:e.comics,name:"comics",template:'<div class="comic"><p class="comic-thumb" style="background-image:url({{thumbnail}}?width=100);-ms-filter:\'progid:DXImageTransform.Microsoft.AlphaImageLoader(src={{thumbnail}}?width=100, sizingMethod=scale)\'"><p class="comic-title ellipsis">{{title}}</p><p class="comic-artist ellipsis">{{artist}}</p></div>'},{engine:Hogan,local:e.artists,name:"artists",template:'<div class="comic"><p class="comic-thumb" style="background-image:url({{thumbnail}}?width=100);-ms-filter:\'progid:DXImageTransform.Microsoft.AlphaImageLoader(src={{thumbnail}}?width=100,sizingMethod=scale)\'"><p class="comic-title">{{title}}</p><p class="comic-artist">{{artist}}</p></div>'}]),t.on("typeahead:selected",function(t,e){location.href="/comic/"+e.comicId}),t.on("typeahead:opened",function(){$("body").addClass("is-searching")}),t.on("typeahead:closed",function(){$("body").removeClass("is-searching")}),this.checkPlaceholder(),c||$(".twitter-typeahead").hide()},initData:function(){var t,e,i,a,s=[],n=[],o=[];for(t=0,e=lc.Home.comics.length;e>t;++t)i=lc.Home.comics[t],a=i.grant,a&&"none"==a.purchase&&"owner"==a.view||s.push(i);var r=s.slice(),c=s.slice();for(r.sort(function(t,e){return t.title.localeCompare(e.title)}),c.sort(function(t,e){return t.artistDisplayName.localeCompare(e.artistDisplayName)}),t=0,e=s.length;e>t;++t){i=r[t],n.push({comicId:i.comicId,artist:i.artistDisplayName,title:i.title,thumbnail:lc.Home.getComicImageUrl(i.comicId,"thumbnail"),tokens:[i.title],value:i.title});var l=c[t];o.push({comicId:l.comicId,artist:l.artistDisplayName,title:l.title,thumbnail:lc.Home.getComicImageUrl(l.comicId,"thumbnail"),tokens:l.artistDisplayName.split(/\s*\/\s*/),value:l.title})}return{comics:n,artists:o}},checkPlaceholder:function(){if(!("placeholder"in e.createElement("input"))){var t=$("#search"),i=$("<span/>");i.attr("id","search-label"),i.html(t.attr("placeholder")),i.insertAfter(t),i.on("click",function(){$(this).hide(),$("#search").focus()}),t.on("focus",function(){$("#search-label").hide()}),t.on("blur",function(){this.value||$("#search-label").show()})}}},lc.Notice={init:function(){this.list=$("#notice-list"),this.load()},load:function(){var t=$.getJSON(e.location.protocol+"//ajax.googleapis.com/ajax/services/feed/load?v=1.0&num=10&q="+encodeURIComponent("http://blog.lezhin.com/rss")+"&callback=?");t.done(function(t){if(200!=t.responseStatus)return void console.error("failed to load feeds");for(var e=lc.Notice,i=e.list,a=t.responseData.feed.entries,s=(new Date).getTime(),n=0,o=0,r=a.length;r>o;++o){var c=a[o];if(!(c.categories.indexOf("\uacf5\uc9c0\uc0ac\ud56d")<0)){var l=$("<li/>");l.addClass("notice");var d=c.publishedDate;s-new Date(d)<=1728e5&&l.addClass("notice-new");var h=$("<a/>");if(h.attr({href:c.link,target:"_blank"}),h.addClass("notice-link"),h.html(c.title),l.append(h),i.append(l),++n>=3)break}}e.curr=i.find(".notice").eq(0).addClass("curr").css("top",0),e.next=i.find(".notice").eq(1).addClass("next").css("top",120),e.initHandler(),e.start()}),t.fail(function(){console.error("failed to load feeds")})},initHandler:function(){this.list.on("mouseenter",this.stop.bind(this)),this.list.on("mouseleave",this.start.bind(this))},start:function(){this.interval=t.setInterval(this.showNext.bind(this),5e3)},stop:function(){t.clearInterval(this.interval)},showNext:function(){var t=this.next.next(".notice");t.length||(t=this.list.find(".notice").first()),this.prev=this.curr.removeClass("curr").animate({top:120}).addClass("prev"),this.curr=this.next.removeClass("next").animate({top:0}).addClass("curr"),this.next=t.css("top",120).addClass("next").animate({top:60})}},lc.Pager={init:function(){this.initCss(),lc.Pager.instances={scheduled:new s($("#comic-scheduled-pager")),printed:new s($("#comic-printed-pager"))},$(t).on("resize",function(){this.resetCss(),this.initCss()}.bind(this))},initCss:function(){this.stylesheet||(this.stylesheet=e.createElement("style"),e.getElementsByTagName("head")[0].appendChild(this.stylesheet));var i=$(t).width(),a=Math.floor(t/this.aspectRatio);if(!(i>768)){var s=".pager,.pager-page{height:"+a+"px;width:"+i+"px}",n=".pager-page[data-pager-pos=left]{left:-"+i+"px}",o=".pager-page[data-pager-pos=right]{left:"+i+"px}",r=this.stylesheet.sheet;r&&(r.insertRule(s,0),r.insertRule(n,1),r.insertRule(o,2),this.width=i,this.height=a)}},resetCss:function(){var t=this.stylesheet.sheet;if(t)for(var e=t.cssRules.length-1;e>=0;--e)t.deleteRule(e)}},s.prototype={startAuto:function(){this.timer=setInterval(function(){this.currPage.animate({left:-lc.Pager.width},{duration:1e3,queue:!1}),this.rightPage.animate({left:0},{duration:1e3,queue:!1,complete:function(){this.moveLeft(),this.resetMove()}.bind(this)})}.bind(this),3e3)},stopAuto:function(){this.timer&&(clearInterval(this.timer),this.currPage.stop(!1,!0),this.rightPage.stop(!1,!0))},resetMove:function(){this.leftPage.css("left",""),this.currPage.css("left",""),this.rightPage.css("left","")},moveLeft:function(){this.leftPage.dataset("pager-pos",null),this.currPage.dataset("pager-pos","left"),this.rightPage.dataset("pager-pos","curr");var t=this.rightPage.next(".pager-page");t.length||(t=this.element.find(".pager-page").first()),t.dataset("pager-pos","right"),this.leftPage=this.element.find("[data-pager-pos=left]"),this.currPage=this.element.find("[data-pager-pos=curr]"),this.rightPage=this.element.find("[data-pager-pos=right]")},moveRight:function(){this.leftPage.dataset("pager-pos","curr"),this.currPage.dataset("pager-pos","right"),this.rightPage.dataset("pager-pos",null);var t=this.leftPage.prev(".pager-page");t.length||(t=this.element.find(".pager-page").last()),t.dataset("pager-pos","left"),this.leftPage=this.element.find("[data-pager-pos=left]"),this.currPage=this.element.find("[data-pager-pos=curr]"),this.rightPage=this.element.find("[data-pager-pos=right]")},onTouchStart:function(t){this.stopAuto(),this.leftEl=this.leftPage[0],this.currEl=this.currPage[0],this.rightEl=this.rightPage[0];var e=t.originalEvent.touches[0];this.started={at:Date.now(),x:e.pageX,y:e.pageY}},onTouchMove:function(t){var e=t.originalEvent.touches;if(1==e.length){var i=e[0],a=this.started.x-i.pageX,s=this.started.y-i.pageY;Math.abs(a)<Math.abs(s)||(t.preventDefault(),this.currEl.style.left=-a+"px",a>0?this.rightEl&&(this.rightEl.style.left=lc.Pager.width-a+"px"):this.leftEl&&(this.leftEl.style.left=-lc.Pager.width-a+"px"))}},onTouchEnd:function(t){var e=t.originalEvent.changedTouches;if(1==e.length){this.resetMove();var i=e[0],a=this.started.x-i.pageX;a<-this.threshold?(this.moveRight(),t.preventDefault()):a>this.threshold?(this.moveLeft(),t.preventDefault()):Date.now()-this.started.at<150}}},lc.Tab={init:function(){$(".tabs").on("click",".tab",function(){lc.Tab.change(this)})},change:function(t){t=$(t);var e=t.closest(".tabwrap"),i=e.dataset("tab"),a=t.dataset("tab");i!=a&&(e.find(".is-on").removeClass("is-on"),t.addClass("is-on"),e.find(".tabcontent[data-tab="+a+"]").addClass("is-on"),e.dataset("tab",a),e.trigger("tab:changed",[i,a]))}},lc.Form={alert:function(t,e){t.prev(".login-msg").html(e).addClass("is-on"),t.on("keyup",function(t){if(13!=t.which){var e=$(this);e.prev(".login-msg").removeClass("is-on"),e.off("keyup")}}),t.one("blur",function(){$(this).prev(".login-msg").removeClass("is-on")}),t.is(":text")&&t.focus()}}}(window,document);